CREATE DATABASE  IF NOT EXISTS `webdatabase` /*!40100 DEFAULT CHARACTER SET utf8 */ /*!80016 DEFAULT ENCRYPTION='N' */;
USE `webdatabase`;
-- MySQL dump 10.13  Distrib 8.0.26, for Win64 (x86_64)
--
-- Host: 127.0.0.1    Database: webdatabase
-- ------------------------------------------------------
-- Server version	8.0.23

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `kayttaja`
--

DROP TABLE IF EXISTS `kayttaja`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `kayttaja` (
  `idKayttaja` int NOT NULL AUTO_INCREMENT,
  `Nimi` varchar(45) NOT NULL,
  `Osoite` varchar(45) NOT NULL,
  `PuhNro` double NOT NULL,
  `Salasana` varchar(255) NOT NULL,
  `OnOmistaja` int DEFAULT NULL,
  `Ravintola_idRavintola` int DEFAULT NULL,
  `KayttajaTunnus` varchar(45) NOT NULL,
  PRIMARY KEY (`idKayttaja`),
  UNIQUE KEY `idKayttajat_UNIQUE` (`idKayttaja`),
  UNIQUE KEY `KayttajaTunnus_UNIQUE` (`KayttajaTunnus`),
  KEY `fk_Kayttajat_Ravintola_idx` (`Ravintola_idRavintola`),
  CONSTRAINT `fk_Kayttajat_Ravintola` FOREIGN KEY (`Ravintola_idRavintola`) REFERENCES `ravintola` (`idRavintola`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `kayttaja`
--

LOCK TABLES `kayttaja` WRITE;
/*!40000 ALTER TABLE `kayttaja` DISABLE KEYS */;
INSERT INTO `kayttaja` VALUES (1,'Pena','qq',121,'123',0,NULL,'Pena'),(2,'Mokko','qwe',121,'$2a$10$dE7tCDwnR6wOHkcUgls3QuRggptvHc9MbkDST/wRK015RXm7OKLWK',0,NULL,'Mokko');
/*!40000 ALTER TABLE `kayttaja` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `ravintola`
--

DROP TABLE IF EXISTS `ravintola`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `ravintola` (
  `idRavintola` int NOT NULL AUTO_INCREMENT,
  `Nimi` varchar(45) NOT NULL,
  `Osoite` varchar(45) NOT NULL,
  `Aukeamisaika` int NOT NULL,
  `Sulkemisaika` int NOT NULL,
  `RavintolanTyyppi` varchar(45) NOT NULL,
  `Hintataso` varchar(45) NOT NULL,
  PRIMARY KEY (`idRavintola`),
  UNIQUE KEY `idRavintola_UNIQUE` (`idRavintola`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ravintola`
--

LOCK TABLES `ravintola` WRITE;
/*!40000 ALTER TABLE `ravintola` DISABLE KEYS */;
INSERT INTO `ravintola` VALUES (1,'Kebu','ertt',12,12,'1','e');
/*!40000 ALTER TABLE `ravintola` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `ruoka`
--

DROP TABLE IF EXISTS `ruoka`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `ruoka` (
  `idRuoka` int NOT NULL AUTO_INCREMENT,
  `Tuote` varchar(45) NOT NULL,
  `Kuvaus` varchar(45) NOT NULL,
  `Hinta` double NOT NULL,
  `Tuotekategoria_idTuotekategoria` int NOT NULL,
  PRIMARY KEY (`idRuoka`),
  UNIQUE KEY `idRuokalista_UNIQUE` (`idRuoka`),
  KEY `fk_Ruoka_Tuotekategoria1_idx` (`Tuotekategoria_idTuotekategoria`),
  CONSTRAINT `fk_Ruoka_Tuotekategoria1` FOREIGN KEY (`Tuotekategoria_idTuotekategoria`) REFERENCES `tuotekategoria` (`idTuotekategoria`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `ruoka`
--

LOCK TABLES `ruoka` WRITE;
/*!40000 ALTER TABLE `ruoka` DISABLE KEYS */;
INSERT INTO `ruoka` VALUES (1,'Kebua','kebaba',12,1);
/*!40000 ALTER TABLE `ruoka` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tilatuttuotteet`
--

DROP TABLE IF EXISTS `tilatuttuotteet`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tilatuttuotteet` (
  `idTilatutTuotteet` int NOT NULL AUTO_INCREMENT,
  `Tuotteet` int NOT NULL,
  `Tilaus_idTilaus` int NOT NULL,
  PRIMARY KEY (`idTilatutTuotteet`),
  KEY `fk_TilatutTuotteet_Tilaus1_idx` (`Tilaus_idTilaus`),
  CONSTRAINT `fk_TilatutTuotteet_Tilaus1` FOREIGN KEY (`Tilaus_idTilaus`) REFERENCES `tilaus` (`idTilaus`)
) ENGINE=InnoDB AUTO_INCREMENT=302158 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tilatuttuotteet`
--

LOCK TABLES `tilatuttuotteet` WRITE;
/*!40000 ALTER TABLE `tilatuttuotteet` DISABLE KEYS */;
INSERT INTO `tilatuttuotteet` VALUES (302061,78,16),(302062,1,29),(302063,1,30),(302064,4,31),(302065,4,32),(302066,4,33),(302067,4,39),(302068,4,42),(302069,4,46),(302070,4,47),(302071,4,63),(302072,4,68),(302073,99,88),(302074,1,91),(302075,4,98),(302076,1,100),(302077,1,101),(302078,1,102),(302079,4,103),(302080,4,104),(302081,4,105),(302082,4,106),(302083,4,107),(302084,4,108),(302085,4,110),(302086,0,124),(302087,0,124),(302088,0,124),(302089,0,124),(302090,4,141),(302091,4,141),(302092,4,141),(302093,4,141),(302094,5,146),(302095,5,146),(302096,5,146),(302097,5,146),(302098,9,154),(302099,9,154),(302100,9,154),(302101,9,154),(302102,0,155),(302103,1,155),(302104,2,155),(302105,3,155),(302106,0,157),(302107,0,157),(302108,0,157),(302109,0,157),(302110,0,159),(302111,0,159),(302112,0,159),(302113,0,159),(302114,5,162),(302115,5,162),(302116,5,162),(302117,5,162),(302118,4,169),(302119,4,169),(302120,4,169),(302121,4,169),(302122,0,170),(302123,0,170),(302124,0,170),(302125,0,170),(302126,0,171),(302127,0,171),(302128,0,171),(302129,0,171),(302130,9,172),(302131,9,172),(302132,9,172),(302133,9,172),(302134,0,180),(302135,0,180),(302136,0,180),(302137,0,180),(302138,5,181),(302139,5,181),(302140,5,181),(302141,5,181),(302142,5,182),(302143,5,182),(302144,5,182),(302145,5,182),(302146,5,183),(302147,4,183),(302148,9,183),(302149,7,183),(302150,6,184),(302151,5,184),(302152,94,184),(302153,3,184),(302154,6,185),(302155,5,185),(302156,94,185),(302157,3,185);
/*!40000 ALTER TABLE `tilatuttuotteet` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tilaus`
--

DROP TABLE IF EXISTS `tilaus`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tilaus` (
  `idTilaus` int NOT NULL AUTO_INCREMENT,
  `Aika` datetime(6) NOT NULL,
  `idRavintola` varchar(45) DEFAULT NULL,
  `Summa` double DEFAULT NULL,
  `Kayttaja_idKayttaja` int NOT NULL,
  PRIMARY KEY (`idTilaus`),
  UNIQUE KEY `idTilaushistoria_UNIQUE` (`idTilaus`),
  KEY `fk_Tilaus_Kayttaja1_idx` (`Kayttaja_idKayttaja`),
  CONSTRAINT `fk_Tilaus_Kayttaja1` FOREIGN KEY (`Kayttaja_idKayttaja`) REFERENCES `kayttaja` (`idKayttaja`)
) ENGINE=InnoDB AUTO_INCREMENT=186 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tilaus`
--

LOCK TABLES `tilaus` WRITE;
/*!40000 ALTER TABLE `tilaus` DISABLE KEYS */;
INSERT INTO `tilaus` VALUES (1,'2022-04-02 14:13:43.000000',NULL,100,1),(2,'2022-04-02 14:30:51.000000',NULL,200,1),(3,'2022-04-02 14:31:50.000000',NULL,300,1),(4,'2022-04-02 14:32:45.000000',NULL,900,1),(5,'2022-04-02 14:33:50.000000',NULL,876,1),(6,'2022-04-02 15:30:23.000000',NULL,666,1),(7,'2022-04-02 15:31:31.000000',NULL,666,1),(8,'2022-04-02 15:31:50.000000',NULL,666,1),(9,'2022-04-02 15:32:55.000000',NULL,666,1),(10,'2022-04-02 15:37:54.000000',NULL,666,1),(11,'2022-04-02 15:38:01.000000',NULL,666,1),(12,'2022-04-02 15:38:45.000000',NULL,666,1),(13,'2022-04-02 15:40:10.000000',NULL,666,1),(14,'2022-04-02 15:41:20.000000',NULL,666,1),(15,'2022-04-02 15:43:43.000000',NULL,666,1),(16,'2022-04-02 15:52:08.000000',NULL,333,1),(17,'2022-04-02 16:01:52.000000',NULL,333,1),(18,'2022-04-02 16:02:28.000000',NULL,333,1),(19,'2022-04-02 16:02:50.000000',NULL,333,1),(20,'2022-04-02 16:02:51.000000',NULL,333,1),(21,'2022-04-02 16:03:09.000000',NULL,333,1),(22,'2022-04-02 16:03:26.000000',NULL,333,1),(23,'2022-04-02 16:07:04.000000',NULL,333,1),(24,'2022-04-02 16:08:13.000000',NULL,333,1),(25,'2022-04-02 16:09:03.000000',NULL,333,1),(26,'2022-04-02 16:10:04.000000',NULL,333,1),(27,'2022-04-02 16:10:28.000000',NULL,333,1),(28,'2022-04-02 16:10:52.000000',NULL,333,1),(29,'2022-04-02 16:11:26.000000',NULL,333,1),(30,'2022-04-02 16:11:53.000000',NULL,444,1),(31,'2022-04-02 16:13:36.000000',NULL,444,1),(32,'2022-04-02 16:13:38.000000',NULL,444,1),(33,'2022-04-02 16:14:50.000000',NULL,667,1),(34,'2022-04-02 16:17:52.000000',NULL,667,1),(35,'2022-04-02 16:18:57.000000',NULL,667,1),(36,'2022-04-02 16:21:49.000000',NULL,667,1),(37,'2022-04-02 16:22:28.000000',NULL,667,1),(38,'2022-04-02 16:22:42.000000',NULL,667,1),(39,'2022-04-02 16:23:22.000000',NULL,667,1),(40,'2022-04-02 16:23:35.000000',NULL,667,1),(41,'2022-04-02 16:24:22.000000',NULL,667,1),(42,'2022-04-02 16:28:46.000000',NULL,667,1),(43,'2022-04-02 16:31:02.000000',NULL,667,1),(44,'2022-04-02 17:11:13.000000',NULL,667,1),(45,'2022-04-02 17:12:54.000000',NULL,667,1),(46,'2022-04-02 17:13:40.000000',NULL,667,1),(47,'2022-04-02 17:14:30.000000',NULL,667,1),(48,'2022-04-02 17:18:08.000000',NULL,667,1),(49,'2022-04-02 17:25:23.000000',NULL,667,1),(50,'2022-04-02 17:29:08.000000',NULL,667,1),(51,'2022-04-02 17:29:36.000000',NULL,667,1),(52,'2022-04-02 17:31:52.000000',NULL,667,1),(53,'2022-04-02 17:32:24.000000',NULL,667,1),(54,'2022-04-02 17:32:45.000000',NULL,667,1),(55,'2022-04-02 17:33:17.000000',NULL,667,1),(56,'2022-04-02 17:33:41.000000',NULL,667,1),(57,'2022-04-02 17:34:08.000000',NULL,667,1),(58,'2022-04-02 17:34:20.000000',NULL,667,1),(59,'2022-04-02 17:34:35.000000',NULL,667,1),(60,'2022-04-02 17:41:40.000000',NULL,667,1),(61,'2022-04-02 17:42:29.000000',NULL,667,1),(62,'2022-04-02 17:43:05.000000',NULL,667,1),(63,'2022-04-02 17:43:21.000000',NULL,667,1),(64,'2022-04-02 17:45:52.000000',NULL,667,1),(65,'2022-04-02 17:46:15.000000',NULL,667,1),(66,'2022-04-02 17:46:29.000000',NULL,667,1),(67,'2022-04-02 17:46:41.000000',NULL,667,1),(68,'2022-04-02 17:47:40.000000',NULL,667,1),(69,'2022-04-02 17:48:09.000000',NULL,667,1),(70,'2022-04-02 17:48:45.000000',NULL,667,1),(71,'2022-04-02 18:17:00.000000',NULL,667,1),(72,'2022-04-02 18:17:26.000000',NULL,667,1),(73,'2022-04-02 18:21:15.000000',NULL,667,1),(74,'2022-04-02 20:39:32.000000',NULL,667,1),(75,'2022-04-02 20:41:14.000000',NULL,667,1),(76,'2022-04-02 20:41:26.000000',NULL,667,1),(77,'2022-04-02 20:42:59.000000',NULL,667,1),(78,'2022-04-02 20:43:26.000000',NULL,667,1),(79,'2022-04-02 20:44:38.000000',NULL,667,1),(80,'2022-04-02 20:45:26.000000',NULL,667,1),(81,'2022-04-02 20:47:04.000000',NULL,667,1),(82,'2022-04-02 20:47:28.000000',NULL,667,1),(83,'2022-04-02 20:48:59.000000',NULL,667,1),(84,'2022-04-02 20:49:01.000000',NULL,667,1),(85,'2022-04-02 20:49:41.000000',NULL,667,1),(86,'2022-04-02 20:50:25.000000',NULL,667,1),(87,'2022-04-02 20:50:59.000000',NULL,667,1),(88,'2022-04-02 20:52:11.000000',NULL,667,1),(89,'2022-04-02 20:53:02.000000',NULL,667,1),(90,'2022-04-02 20:53:24.000000',NULL,667,1),(91,'2022-04-02 20:53:51.000000',NULL,667,1),(92,'2022-04-02 20:54:41.000000',NULL,667,1),(93,'2022-04-02 20:54:59.000000',NULL,667,1),(94,'2022-04-02 20:55:11.000000',NULL,667,1),(95,'2022-04-02 20:55:47.000000',NULL,667,1),(96,'2022-04-02 20:58:56.000000',NULL,667,1),(97,'2022-04-02 20:59:46.000000',NULL,667,1),(98,'2022-04-02 21:00:06.000000',NULL,667,1),(99,'2022-04-02 21:01:35.000000',NULL,667,1),(100,'2022-04-02 21:02:39.000000',NULL,667,1),(101,'2022-04-02 21:03:42.000000',NULL,667,1),(102,'2022-04-02 21:04:03.000000',NULL,667,1),(103,'2022-04-02 21:05:18.000000',NULL,667,1),(104,'2022-04-02 21:05:42.000000',NULL,667,1),(105,'2022-04-02 21:06:24.000000',NULL,667,1),(106,'2022-04-02 21:07:58.000000',NULL,667,1),(107,'2022-04-02 21:08:37.000000',NULL,667,1),(108,'2022-04-02 21:09:14.000000',NULL,667,1),(109,'2022-04-02 21:11:01.000000',NULL,667,1),(110,'2022-04-02 21:11:42.000000',NULL,667,1),(111,'2022-04-02 21:14:50.000000',NULL,667,1),(112,'2022-04-02 21:16:08.000000',NULL,667,1),(113,'2022-04-02 21:16:52.000000',NULL,667,1),(114,'2022-04-02 21:17:01.000000',NULL,667,1),(115,'2022-04-02 21:19:58.000000',NULL,667,1),(116,'2022-04-02 21:20:27.000000',NULL,667,1),(117,'2022-04-02 21:20:55.000000',NULL,667,1),(118,'2022-04-02 21:21:06.000000',NULL,667,1),(119,'2022-04-02 21:21:20.000000',NULL,667,1),(120,'2022-04-02 21:21:38.000000',NULL,667,1),(121,'2022-04-02 21:23:58.000000',NULL,667,1),(122,'2022-04-02 21:25:03.000000',NULL,667,1),(123,'2022-04-02 21:25:23.000000',NULL,667,1),(124,'2022-04-02 21:26:33.000000',NULL,667,1),(125,'2022-04-02 21:27:51.000000',NULL,667,1),(126,'2022-04-02 21:35:30.000000',NULL,667,1),(127,'2022-04-02 21:39:44.000000',NULL,667,1),(128,'2022-04-02 21:40:23.000000',NULL,667,1),(129,'2022-04-02 21:42:08.000000',NULL,667,1),(130,'2022-04-02 21:42:50.000000',NULL,667,1),(131,'2022-04-02 21:44:53.000000',NULL,667,1),(132,'2022-04-02 21:45:10.000000',NULL,667,1),(133,'2022-04-02 21:45:43.000000',NULL,667,1),(134,'2022-04-02 21:49:13.000000',NULL,667,1),(135,'2022-04-02 21:49:44.000000',NULL,667,1),(136,'2022-04-02 21:51:17.000000',NULL,667,1),(137,'2022-04-02 21:53:11.000000',NULL,667,1),(138,'2022-04-02 21:53:37.000000',NULL,667,1),(139,'2022-04-03 04:52:03.000000',NULL,667,1),(140,'2022-04-03 04:53:09.000000',NULL,667,1),(141,'2022-04-03 04:53:37.000000',NULL,667,1),(142,'2022-04-03 04:54:33.000000',NULL,667,1),(143,'2022-04-03 04:55:31.000000',NULL,667,1),(144,'2022-04-03 05:00:00.000000',NULL,667,1),(145,'2022-04-03 05:00:20.000000',NULL,667,1),(146,'2022-04-03 05:00:37.000000',NULL,667,1),(147,'2022-04-03 05:01:06.000000',NULL,667,1),(148,'2022-04-03 05:02:04.000000',NULL,667,1),(149,'2022-04-03 05:06:00.000000',NULL,667,1),(150,'2022-04-03 05:07:33.000000',NULL,667,1),(151,'2022-04-03 05:10:11.000000',NULL,667,1),(152,'2022-04-03 05:11:28.000000',NULL,667,1),(153,'2022-04-03 05:11:45.000000',NULL,667,1),(154,'2022-04-03 05:12:29.000000',NULL,667,1),(155,'2022-04-03 05:17:15.000000',NULL,667,1),(156,'2022-04-03 05:19:32.000000',NULL,667,1),(157,'2022-04-03 05:20:40.000000',NULL,667,1),(158,'2022-04-03 05:21:46.000000',NULL,667,1),(159,'2022-04-03 05:27:27.000000',NULL,667,1),(160,'2022-04-03 05:28:38.000000',NULL,667,1),(161,'2022-04-03 05:31:49.000000',NULL,667,1),(162,'2022-04-03 05:32:05.000000',NULL,667,1),(163,'2022-04-03 05:32:36.000000',NULL,667,1),(164,'2022-04-03 05:40:56.000000',NULL,667,1),(165,'2022-04-03 05:44:05.000000',NULL,667,1),(166,'2022-04-03 05:44:49.000000',NULL,667,1),(167,'2022-04-03 05:47:21.000000',NULL,667,1),(168,'2022-04-03 05:47:42.000000',NULL,667,1),(169,'2022-04-03 05:51:34.000000',NULL,667,1),(170,'2022-04-03 06:24:33.000000',NULL,667,1),(171,'2022-04-03 06:31:03.000000',NULL,667,1),(172,'2022-04-03 06:31:40.000000',NULL,667,1),(173,'2022-04-03 06:32:27.000000',NULL,667,1),(174,'2022-04-03 06:32:49.000000',NULL,667,1),(175,'2022-04-03 06:33:19.000000',NULL,667,1),(176,'2022-04-03 06:33:34.000000',NULL,667,1),(177,'2022-04-03 06:34:53.000000',NULL,667,1),(178,'2022-04-03 06:35:27.000000',NULL,667,1),(179,'2022-04-03 06:36:25.000000',NULL,667,1),(180,'2022-04-03 06:36:41.000000',NULL,667,1),(181,'2022-04-03 15:34:55.000000',NULL,667,1),(182,'2022-04-03 15:37:07.000000',NULL,667,1),(183,'2022-04-03 15:54:51.000000',NULL,667,1),(184,'2022-04-03 15:55:23.000000',NULL,667,1),(185,'2022-04-03 15:56:48.000000',NULL,667,1);
/*!40000 ALTER TABLE `tilaus` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tuotekategoria`
--

DROP TABLE IF EXISTS `tuotekategoria`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tuotekategoria` (
  `idTuotekategoria` int NOT NULL AUTO_INCREMENT,
  `Tuotekategoria` varchar(45) NOT NULL,
  `Ravintola_idRavintola` int NOT NULL,
  PRIMARY KEY (`idTuotekategoria`),
  KEY `fk_Tuotekategoria_Ravintola1_idx` (`Ravintola_idRavintola`),
  CONSTRAINT `fk_Tuotekategoria_Ravintola1` FOREIGN KEY (`Ravintola_idRavintola`) REFERENCES `ravintola` (`idRavintola`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tuotekategoria`
--

LOCK TABLES `tuotekategoria` WRITE;
/*!40000 ALTER TABLE `tuotekategoria` DISABLE KEYS */;
INSERT INTO `tuotekategoria` VALUES (1,'KEbubtuote',1);
/*!40000 ALTER TABLE `tuotekategoria` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping routines for database 'webdatabase'
--
/*!50003 DROP PROCEDURE IF EXISTS `new_procedure` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`newAdmin`@`localhost` PROCEDURE `new_procedure`(IN Summa INT, IN idKayttaja INT ,  IN Tuotteet INT)
BEGIN
insert into tilaus(Aika, Summa) Values (NOW(), 101);
insert into tilatuttuotteet (Tuotteet) values (Tuotteet);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `OstaTuote` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`newAdmin`@`localhost` PROCEDURE `OstaTuote`(IN Summa INT, IN idKayttaja INT,  IN OstosTaulu JSON)
BEGIN
DECLARE i INT DEFAULT 0;
DECLARE idRuoka3 INT DEFAULT 0;

SET @idRuoka = JSON_UNQUOTE(JSON_EXTRACT(OstosTaulu, '$[*]', '$.idRuoka'));
insert into tilaus(Aika, Summa, Kayttaja_idKayttaja) Values (NOW(), Summa, idKayttaja);
SET @last_tilaus = last_insert_id();
SET @OstosTaulu_Pituus = JSON_LENGTH(@idRuoka);
WHILE i < @OstosTaulu_Pituus DO
    Select * from json_table(@idRuoka, '$[0]' columns( id int(10) path '$.idRuoka') )as tt into idRuoka3 ;
	insert into tilatuttuotteet (Tuotteet, Tilaus_idTilaus) values (idRuoka3, @last_tilaus); 
    Select JSON_REMOVE(@idRuoka, '$[0]') into @idRuoka;
     SELECT i + 1 INTO i;
  END WHILE;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2022-04-03 15:57:55
